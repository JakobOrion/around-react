(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(8),c=n.n(o),i=(n(16),n(11)),s=n(2),l=Object(a.createContext)(),u=n(9),d=n(10),b=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(u.a)(this,e),this._baseUrl=n,this._headers=a}return Object(d.a)(e,[{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getCardList",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getAppInfo",value:function(){return Promise.all([this.getUserInfo(),this.getCardList()])}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"addLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeLike",value:function(e){return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.addLike(e):this.removeLike(e)}},{key:"setProfilePicture",value:function(e){return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error!"+e.statusText)})).catch((function(e){return console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"7c54637c-526f-4047-8439-3339585d598e","Content-Type":"application/json"}}),j=n.p+"static/media/around_us_logo.4e8e0a1d.svg",p=n(0);var m=function(e){var t=e.logo;return Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("img",{className:"logo",src:t,alt:"Around the U.S. logo"})})};var f=function(e){var t=e.card,n=e.onCardClick,r=e.onCardLike,o=e.onDeleteClick,c=Object(a.useContext)(l),i=t.owner._id===c._id,s=t.likes.some((function(e){return e._id===c._id}));return Object(p.jsxs)("li",{className:"photo-card",children:[Object(p.jsx)("button",{type:"button","aria-label":"Delete",className:"photo-card__delete-button",onClick:function(){o(t)},hidden:!i}),Object(p.jsx)("img",{className:"photo-card__image",src:t.link,alt:t.name,onClick:function(){n(t)}}),Object(p.jsxs)("div",{className:"photo-card__info",children:[Object(p.jsx)("h2",{className:"photo-card__title",children:t.name}),Object(p.jsx)("button",{type:"button","aria-label":"Like",className:"photo-card__heart ".concat(s&&"photo-card__heart_active"),onClick:function(){r(t)}}),Object(p.jsx)("div",{className:"photo-card__likes",children:t.likes.length})]})]})};var _=function(e){var t=Object(a.useContext)(l),n=e.onEditAvatar,r=e.onEditProfile,o=e.onAddPlace,c=e.cards,i=e.onCardClick,s=e.onCardLike,u=e.onDeleteClick;return Object(p.jsxs)("main",{className:"content",children:[Object(p.jsxs)("section",{className:"profile",children:[Object(p.jsxs)("div",{className:"profile__avatar-container",children:[Object(p.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:t.name}),Object(p.jsx)("button",{type:"button","aria-label":"Edit Profile Picture",className:"profile__avatar-edit",onClick:n})]}),Object(p.jsxs)("div",{className:"profile__info",children:[Object(p.jsx)("div",{className:"profile__name-container",children:Object(p.jsx)("h1",{className:"profile__name-text",children:t.name})}),Object(p.jsx)("button",{type:"button","aria-label":"Edit Profile",className:"profile__edit",onClick:r}),Object(p.jsx)("p",{className:"profile__description",children:t.about})]}),Object(p.jsx)("button",{type:"button","aria-label":"Add Photo Card",className:"profile__add",onClick:o})]}),Object(p.jsx)("section",{className:"photo-cards",children:Object(p.jsx)("ul",{className:"photo-cards__group",children:c.map((function(e){return Object(p.jsx)(f,{card:e,onCardClick:i,onCardLike:s,onDeleteClick:u},e._id)}))})})]})};var h=function(){return Object(p.jsx)("footer",{className:"footer",children:Object(p.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Around The U.S."})})};var O=function(e){var t=e.card,n=e.isOpen,a=e.onClose;return Object(p.jsx)("div",{className:"popup popup_type_image ".concat(n&&"popup_opened"),onClick:a,children:Object(p.jsxs)("div",{className:"popup__container popup__container_figure",children:[Object(p.jsx)("button",{type:"button","aria-label":"Close",className:"popup__close"}),Object(p.jsxs)("figure",{className:"popup__figure",children:[Object(p.jsx)("img",{className:"popup__image",src:t&&t.link,alt:t.name}),Object(p.jsx)("figcaption",{className:"popup__image-title",children:t.name})]})]})})},v=n(4),g=n(3);var x=function(e){var t=e.name,n=e.title,a=e.children,r=e.buttonText,o=e.isOpen,c=e.isValid,i=e.isLoading,s=e.onClose,l=e.onSubmit;return Object(p.jsx)("div",{className:"popup popup_type_".concat(t," ").concat(o&&"popup_opened"),onClick:s,children:Object(p.jsxs)("div",{className:"popup__container",children:[Object(p.jsx)("h3",{className:"popup__title",children:n}),Object(p.jsx)("button",{type:"button","aria-label":"Close",className:"popup__close"}),Object(p.jsxs)("form",{className:"popup__form",name:t,onSubmit:l,children:[a,Object(p.jsx)("button",{type:"submit",name:r,className:"form__submit ".concat(!c&&"form__submit_disabled"),disabled:!c||"",children:i?"Saving...":r})]})]})})};var k=function(e){var t=e.isOpen,n=e.isLoading,r=e.onClose,o=e.onUpdateUser,c=Object(a.useContext)(l),i=Object(a.useState)({}),u=Object(s.a)(i,2),d=u[0],b=u[1],j=Object(a.useState)({}),m=Object(s.a)(j,2),f=m[0],_=m[1],h=Object(a.useState)(!0),O=Object(s.a)(h,2),k=O[0],C=O[1];function y(e){e.target.value=e.clipboardData.getData("text/plain"),N(e)}function N(e){b(Object(g.a)(Object(g.a)({},d),{},Object(v.a)({},e.target.name,e.target.value))),_(Object(g.a)(Object(g.a)({},f),{},Object(v.a)({},e.target.name,e.target.validationMessage))),""!==f.name||""!==f.about||""==d.name||""==d.about?C(!1):C(!0)}return Object(a.useEffect)((function(){b({name:c.name,about:c.about})}),[c]),Object(p.jsxs)(x,{name:"edit-profile",title:"Edit profile",buttonText:"Save",isOpen:t,isValid:k,isLoading:n,onClose:r,onSubmit:function(e){e.preventDefault(),o({name:d.name,about:d.about})},children:[Object(p.jsx)("input",{"aria-label":"Name",type:"text",className:"form__input form__input_type_name ".concat(f.name&&"form__input_type_error"),name:"name",value:d.name||"",onChange:N,onPaste:y,placeholder:"Name",minLength:"2",maxLength:"40","aria-required":"true",required:!0}),Object(p.jsx)("span",{className:"form__error ".concat(f.name&&"form__error_visible"),"aria-live":"polite",children:f.name}),Object(p.jsx)("input",{"aria-label":"About me",type:"text",className:"form__input form__input_type_description ".concat(f.about&&"form__input_type_error"),name:"about",value:d.about||"",onChange:N,onPaste:y,placeholder:"About me",minLength:"2",maxLength:"200","aria-required":"true",required:!0}),Object(p.jsx)("span",{className:"form__error ".concat(f.about&&"form__error_visible"),"aria-live":"polite",children:f.about})]})};var C=function(e){var t=e.isOpen,n=e.isLoading,r=e.onClose,o=e.onUpdateAvatar,c=Object(a.useRef)(),i=Object(a.useState)({}),l=Object(s.a)(i,2),u=l[0],d=l[1],b=Object(a.useState)(!1),j=Object(s.a)(b,2),m=j[0],f=j[1];function _(e){d(Object(g.a)(Object(g.a)({},u),{},Object(v.a)({},e.target.name,e.target.validationMessage))),""!==u.avatar||""==c.current.value?f(!1):f(!0)}return Object(p.jsxs)(x,{name:"edit-avatar",title:"Change profile picture",buttonText:"Save",isOpen:t,isValid:m,isLoading:n,onClose:r,onSubmit:function(e){e.preventDefault(),o(c.current.value),c.current.value="",d({})},onUpdateAvatar:o,children:[Object(p.jsx)("input",{ref:c,"aria-label":"Image URL",type:"url",className:"form__input form__input_type_url ".concat(u.avatar&&"form__input_type_error"),name:"avatar",onChange:_,onPaste:function(e){c.current.value=e.clipboardData.getData("text/plain"),_(e)},placeholder:"Image link","aria-required":"true",required:!0}),Object(p.jsx)("span",{className:"form__error ".concat(u.avatar&&"form__error_visible"),"aria-live":"polite",children:u.avatar})]})};var y=function(e){var t=e.isOpen,n=e.isLoading,r=e.onClose,o=e.onAddPlace,c=Object(a.useState)({}),i=Object(s.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)({}),b=Object(s.a)(d,2),j=b[0],m=b[1],f=Object(a.useState)(!1),_=Object(s.a)(f,2),h=_[0],O=_[1];function k(e){e.target.value=e.clipboardData.getData("text/plain"),C(e)}function C(e){u(Object(g.a)(Object(g.a)({},l),{},Object(v.a)({},e.target.name,e.target.value))),m(Object(g.a)(Object(g.a)({},j),{},Object(v.a)({},e.target.name,e.target.validationMessage))),""!==j.name||""!==j.link||""==l.name||""==l.link?O(!1):O(!0)}return Object(p.jsxs)(x,{name:"add-card",title:"New place",buttonText:"Create",isOpen:t,isValid:h,isLoading:n,onClose:r,onSubmit:function(e){e.preventDefault(),o({name:l.name,link:l.link}),u({}),m({})},onAddPlace:o,children:[Object(p.jsx)("input",{"aria-label":"Title",type:"text",className:"form__input form__input_type_card-title ".concat(j.name&&"form__input_type_error"),name:"name",value:l.name||"",onChange:C,onPaste:k,placeholder:"Title",minLength:"1",maxLength:"30","aria-required":"true",required:!0}),Object(p.jsx)("span",{className:"form__error ".concat(j.name&&"form__error_visible"),"aria-live":"polite",children:j.name}),Object(p.jsx)("input",{"aria-label":"Image URL",type:"url",className:"form__input form__input_type_url ".concat(j.link&&"form__input_type_error"),name:"link",value:l.link||"",onChange:C,onPaste:k,placeholder:"Image link","aria-required":"true",required:!0}),Object(p.jsx)("span",{className:"form__error ".concat(j.link&&"form__error_visible"),"aria-live":"polite",children:j.link})]})};var N=function(e){var t=e.card,n=e.isOpen,r=e.isLoading,o=e.onClose,c=e.onConfirmDelete,i=Object(a.useState)(!0),l=Object(s.a)(i,2),u=l[0];return l[1],Object(p.jsx)(x,{name:"delete-card",title:"Are you sure?",buttonText:"Yes",isOpen:n,isValid:u,isLoading:r,onClose:o,onSubmit:function(e){e.preventDefault(),c(t)}})};var L=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1],c=function(t){return e.toLowerCase()==t.key.toLowerCase()},i=function(e){c(e)&&o(!0)},l=function(e){c(e)&&o(!1)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",l)}}),[e]),r};var S=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),c=Object(s.a)(o,2),u=c[0],d=c[1],f=Object(a.useState)(!1),v=Object(s.a)(f,2),g=v[0],x=v[1],S=Object(a.useState)(!1),P=Object(s.a)(S,2),E=P[0],U=P[1],T=Object(a.useState)(!1),A=Object(s.a)(T,2),D=A[0],w=A[1],I=Object(a.useState)(!1),q=Object(s.a)(I,2),J=q[0],V=q[1],F=Object(a.useState)({}),M=Object(s.a)(F,2),R=M[0],B=M[1],H=Object(a.useState)({}),z=Object(s.a)(H,2),Y=z[0],G=z[1],K=Object(a.useState)([]),Q=Object(s.a)(K,2),W=Q[0],X=Q[1],Z=L("Escape");function $(e){!e.target.classList.contains("popup__close")&&e.target.closest(".popup__container")||ee()}function ee(){r(!1),d(!1),x(!1),U(!1),w(!1),V(!1)}return Object(a.useEffect)((function(){b.getAppInfo().then((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];G(n),X(a)})).catch((function(e){console.log(e)}))}),[]),Object(a.useEffect)((function(){ee()}),[Z]),Object(p.jsx)(l.Provider,{value:Y,children:Object(p.jsxs)("div",{className:"page",children:[Object(p.jsxs)("div",{className:"page__container",children:[Object(p.jsx)(m,{logo:j}),Object(p.jsx)(_,{onEditAvatar:function(){r(!0)},onEditProfile:function(){d(!0)},cards:W,onAddPlace:function(){x(!0)},onCardClick:function(e){B(e),w(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Y._id}));b.changeLikeCardStatus(e._id,!t).then((function(t){var n=W.map((function(n){return n._id===e._id?t:n}));X(n)})).catch((function(e){console.log(e)}))},onDeleteClick:function(e){B(e),U(!0)}}),Object(p.jsx)(h,{})]}),Object(p.jsx)(C,{isOpen:n,isLoading:J,onClose:$,onUpdateAvatar:function(e){V(!0),b.setProfilePicture(e).then((function(e){G(e)})).catch((function(e){console.log(e)})).finally((function(){return ee()}))}}),Object(p.jsx)(k,{isOpen:u,isLoading:J,onClose:$,onUpdateUser:function(e){var t=e.name,n=e.about;V(!0),b.setUserInfo({name:t,about:n}).then((function(e){G(e)})).catch((function(e){console.log(e)})).finally((function(){return ee()}))}}),Object(p.jsx)(y,{isOpen:g,isLoading:J,onClose:$,onAddPlace:function(e){var t=e.name,n=e.link;V(!0),b.addCard({name:t,link:n}).then((function(e){X([e].concat(Object(i.a)(W)))})).catch((function(e){console.log(e)})).finally((function(){return ee()}))}}),Object(p.jsx)(N,{card:R,isOpen:E,isLoading:J,onClose:$,onConfirmDelete:function(e){V(!0),b.removeCard(e._id).then((function(){var t=W.filter((function(t){return t._id!==e._id}));X(t)})).catch((function(e){console.log(e)})).finally((function(){return ee()}))}}),Object(p.jsx)(O,{card:R,isOpen:D,onClose:$})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(S,{})}),document.getElementById("root")),P()}},[[18,1,2]]]);
//# sourceMappingURL=main.5e0472f1.chunk.js.map